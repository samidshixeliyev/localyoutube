server:
  port: ${SERVER_PORT:8081}
  address: 0.0.0.0
  tomcat:
    max-swallow-size: 100MB

spring:
  application:
    name: localtube

  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:sqlserver://555-PTSVBZ:65388;instanceName=SQLEXPRESS;databaseName=test_portal;encrypt=true;trustServerCertificate=true}
    username: ${SPRING_DATASOURCE_USERNAME:sa}
    password: ${SPRING_DATASOURCE_PASSWORD:123}
    driver-class-name: com.microsoft.sqlserver.jdbc.SQLServerDriver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 2
      connection-timeout: 30000

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.SQLServerDialect
        default_schema: dbo

  servlet:
    multipart:
      enabled: true
      file-size-threshold: 2KB
      max-file-size: 100MB
      max-request-size: 100MB

jwt:
  secret: ${JWT_SECRET:4gTduyxJahQatgIkxwGErvADeIjfdulxI98B8bAGUOKStnBVTyngXfU5jM1rMbVR}

localtube:
  storage:
    upload-dir: ${UPLOAD_DIR:${user.dir}/modtube/uploads}
    hls-dir: ${HLS_DIR:${user.dir}/modtube/hls}
    temp-dir: ${TEMP_DIR:${user.dir}/modtube/temp}
    thumbnail-dir: ${THUMBNAIL_DIR:${user.dir}/modtube/thumbnails}
    max-file-size: 53687091200
    min-disk-free: 5368709120
    allowed-extensions: mp4,mkv,avi,mov,wmv,flv,webm

  transcoding:
    segment-duration: 6
    qualities: 480p,720p,1080p,2160p

  elasticsearch:
    host: ${ELASTICSEARCH_HOST:localhost}
    port: ${ELASTICSEARCH_PORT:9200}
    scheme: ${ELASTICSEARCH_SCHEME:http}
    username: ${ELASTICSEARCH_USERNAME:}
    password: ${ELASTICSEARCH_PASSWORD:}
    video-index: ${ELASTICSEARCH_VIDEO_INDEX:videos}
    comment-index: ${ELASTICSEARCH_COMMENT_INDEX:comments}
    like-index: ${ELASTICSEARCH_LIKE_INDEX:likes}

logging:
  level:
    root: INFO
    az.dev.localtube: DEBUG

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus,metrics
  endpoint:
    health:
      show-details: always
  prometheus:
    metrics:
      export:
        enabled: true